<script>
  const twinwordApiKey = "151c80fd18msh6bc1208d6296b6ep1b10b8jsna5e668379b92"; // from RapidAPI or Twinword

  async function analyzeMoodInput() {
    const userInput = document.getElementById("moodInput").value;

    const res = await fetch("https://twinword-sentiment-analysis.p.rapidapi.com/analyze/", {
      method: "POST",
      headers: {
        "content-type": "application/x-www-form-urlencoded",
        "X-RapidAPI-Key": twinwordApiKey,
        "X-RapidAPI-Host": "twinword-sentiment-analysis.p.rapidapi.com"
      },
      body: new URLSearchParams({ text: userInput })
    });

    const data = await res.json();

    let mood = "neutral";
    if (data.score > 0.5) {
      mood = "happy";
    } else if (data.score < -0.5) {
      mood = "sad";
    }

    // Save mood to localStorage
    localStorage.setItem("userMood", mood);

    // Redirect to playlist page
    window.location.href = "playlist.html";
  }
</script>
